<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <!-- Babylon.js -->
    <script src="https://preview.babylonjs.com/cannon.js"></script>
    <script src="http://www.babylonjs.com/hand.minified-1.2.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babylonjs/2.5.0/babylon.js"></script>
     <!-- <script src="https://cdn.babylonjs.com/babylon.js"></script> -->

    <style>
    
        canvas {
            width: 100%;
            height: 100%;
        }

    </style>
</head>
<body>
    <button id="btn" style="z-index:10000000; position:fixed; left:0; right:0; width: 5%; height: 5%;" onclick="myFunction()">LOG</button>

    <div id="g-graphic"></div>

    <script>
        var canvasNode = document.createElement("CANVAS");
        var canvas = document.getElementById("g-graphic").appendChild(canvasNode);
        var engine = new BABYLON.Engine(canvas, true);
        var scene = new BABYLON.Scene(engine);

        // var light = new BABYLON.PointLight("Omni", new BABYLON.Vector3(10, 10, 50), scene);
        // var light2 = new BABYLON.PointLight("Omni", new BABYLON.Vector3(10, 10, -20), scene);
        // var camera = new BABYLON.ArcRotateCamera("Camera", 0, 0.8, 100, new BABYLON.Vector3.Zero(), scene);
        // camera.attachControl(canvas);

        // var sphere2 = BABYLON.Mesh.CreateSphere("Sphere2", 16.0, 10.0, scene);
        // sphere2.position.x = 0;

        // var simpleMaterial1 = new BABYLON.StandardMaterial("texture2", scene);
        // simpleMaterial1.diffuseColor = new BABYLON.Color3(1, 0, 0);//Red

        // var simpleMaterial2 = new BABYLON.StandardMaterial("texture2-1", scene);
        // simpleMaterial2.diffuseColor = new BABYLON.Color3(0, 1, 0);//Red

        // var simpleMaterial3 = new BABYLON.StandardMaterial("texture2-2", scene);
        // simpleMaterial3.diffuseColor = new BABYLON.Color3(0, 0, 1);//Red


        // // Multimaterial
        // var multimat = new BABYLON.MultiMaterial("multi", scene);
        // multimat.subMaterials.push(simpleMaterial1);
        // multimat.subMaterials.push(simpleMaterial2);
        // // multimat.subMaterials.push(simpleMaterial3);

        // sphere2.subMeshes = [];

        // var verticesCount = sphere2.getTotalVertices();

        // sphere2.subMeshes.push(new BABYLON.SubMesh(0, 0, verticesCount, 0, 900, sphere2));
        // sphere2.subMeshes.push(new BABYLON.SubMesh(1, 0, verticesCount, 900, 900, sphere2));
        // sphere2.subMeshes.push(new BABYLON.SubMesh(2, 0, verticesCount, 1800, 2088, sphere2));

        // sphere2.material = multimat;


        var camAlpha = 0.2;
        var camBeta = Math.PI / 2;
        var camRadius = 20;

        var camera = new BABYLON.ArcRotateCamera("Camera2", camAlpha, camBeta, camRadius, new BABYLON.Vector3.Zero(), scene);
        camera.attachControl(canvas, false);
        camera.checkCollisions = true;

        var light0 = new BABYLON.PointLight("Omni", new BABYLON.Vector3.Zero(), scene);
        light0.parent = camera; //light follows camera
        light0.intensity = 0.4;
        scene.light0 = light0;

        var light = new BABYLON.HemisphericLight("hemi2", new BABYLON.Vector3(0, 1, 0), scene);
    

        var material1;
        var material2

        BABYLON.SceneLoader.ImportMesh("", "assets/golden-stone/", "golden-stone.babylon", scene, function (newMeshes) {

            newMeshes[0].position = new BABYLON.Vector3(0, 0, 7);
            newMeshes[0].rotation = new BABYLON.Vector3(-Math.PI / 2 * 1.1, Math.PI / 2, Math.PI);

            material1 = new BABYLON.StandardMaterial("texture1", scene);
            material1.diffuseTexture = new BABYLON.Texture("assets/golden-stone/golden-stone1.png", scene);
            // material1.diffuseTexture.uOffset = 0.14020000000000088; //vertical offset 0f 10%

            material1.diffuseTexture.wAng = Math.PI / 2;
            material1.diffuseTexture.hasAlpha = true;

            material2 = new BABYLON.StandardMaterial("texture2", scene);
            material2.diffuseTexture = new BABYLON.Texture("assets/golden-stone/golden-stone2.png", scene);
            // material2.diffuseTexture.wAng = Math.PI / 2;

            material2.diffuseTexture.hasAlpha = true;
            // material2.diffuseTexture.vOffset = 0.7880000000000006; //vertical offset 0f 10%


            var multimat = new BABYLON.MultiMaterial("multi", scene);
            multimat.subMaterials.push(material1);
            multimat.subMaterials.push(material2);

            newMeshes[0].material = multimat;

            newMeshes[0].subMeshes = [];

            var verticesCount = newMeshes[0].getTotalVertices();

            // newMeshes[0].subMeshes.push(new BABYLON.SubMesh(0, 0, verticesCount, 0, 108921, newMeshes[0]));
            // newMeshes[0].subMeshes.push(new BABYLON.SubMesh(1, 0, verticesCount, 108921, 108918, newMeshes[0]));

            newMeshes[0].subMeshes.push(new BABYLON.SubMesh(0, 0, verticesCount, 0, 107700, newMeshes[0]));
            newMeshes[0].subMeshes.push(new BABYLON.SubMesh(1, 0, verticesCount, 108000, 108918, newMeshes[0]));

            scene.beforeRender = function () {

                // material2.diffuseTexture.wAng += 0.0001;
                // material2.diffuseTexture.vOffset += 0.001
            };

        });




        engine.runRenderLoop(function(){
            scene.render();
        })



        function myFunction() {
            console.log(material2.diffuseTexture.vOffset);
            // console.log(material2.diffuseTexture.wAng);

        }


    </script>
</body>
</html>